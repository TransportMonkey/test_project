## 一、项目简介

基于 Flask 框架构建的轻量级 Web 服务应用，旨在提供模块化、可配置的 RESTful API 服务。项目结构清晰，便于扩展和维护，适用于开发环境到生产环境的平滑部署。

## 二、项目特点

- **基于 Flask 与 Flask-RESTx**：使用 `Flask` 作为核心 Web 框架，结合 `Flask-RESTx` 实现 API 接口的快速开发与文档自动生成。
- **灵活的配置管理**：支持通过环境变量加载不同环境（开发、预发布、生产）的配置文件（如 `config.dev.py`、`config.prod.py`），便于多环境部署。
- **数据库集成**：集成 `Flask-SQLAlchemy` 进行 ORM 管理，使用 `PyMySQL` 作为 MySQL 驱动(可以支持不同数据库驱动)，支持模型定义与数据库会话管理。
- **日志系统**：内置日志初始化功能，日志文件路径可配置，支持根据环境输出不同级别的日志信息。

## 三、定义模型

1. **user模型**
   - 接口：创建用户、删除用户、部分更新用户、完全更新用户、查看用户、用户登录、用户退出登录、用户注册成功并发送一条邮箱、用户上传和下载文件
2. **blog模型**
   - 接口：查看分类、查看文章、删除文章、发布文章、查看评论、删除评论、评论文章
3. **todo模型**
   - 接口：创建todo、查看todo、删除todo、部分更新todo、完全更新todo
4. **bookkeeping模型**
   - 接口：创建收支分类、删除收支分类、修改收支分类、查询收支分类；创建收支记录、查询收支记录，删除收支记录、修改收支记录、统计收支的总数

## 四、环境准备

- 切换到根目录

```shell
cd src
```

- 依赖环境

```python
pip install -r requirements.txt
```

## 五、项目配置文件

- ./config/config.dev.py

  定义了本地的配置信息

- ./config/config.prod.py

  定义了线上的配置信息

- 如果在其它脚本使用配置文件中的全局变量，可以通过以下方法去获取

```python
from flask import current_app # 导包
current_app.get_config("EXPIRED_TIME",24) # EXPIRED_TIME：配置文件的全局变量名；# 第二个参数是设置默认值，如果找不到就默认24
```

## 六、数据库初始化

1. 识别本地orm模型，比对数据库，生成数据库变更文件（db/versions目录，会按命令执行时间生成一个版本变更文件） 

```
alembic revision --autogenerate
```

2. 找到新生成的数据库变更文件的版本号(例：f06d0360070a)，将数据库变更提交到数据库

```
alembic upgrade f06d0360070a
```

提醒：**如果后续模型变更了，则再重复执行[1,2],完成表结构的更新**

## 七、启动项目

```python
python app.py
```

**版本**：1.1.2（初始版本）